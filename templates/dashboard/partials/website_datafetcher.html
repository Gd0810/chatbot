<!-- templates/dashboard/partials/website_datafetcher.html -->
{% include 'toast.html' %}
<div class="bg-white shadow rounded p-6">
  <h2 class="text-2xl font-semibold mb-4">Website Data Fetcher</h2>
  <p class="text-gray-600 mb-6">Crawl a website and extract content organized by sections.</p>

  <form id="crawler-form" class="space-y-4 mb-6"
        hx-post="{% url 'dashboard:website_datafetcher_crawl' %}"
        hx-target="#results-container"
        data-processing-message="Crawling website... This may take a minute.">
    {% csrf_token %}
    <div>
      <label for="url" class="block text-sm font-medium text-gray-700 mb-1">Website URL *</label>
      <input type="url" id="url" name="url" required
             placeholder="https://example.com"
             class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500">
    </div>

    <div>
      <label for="max_pages" class="block text-sm font-medium text-gray-700 mb-1">
        Max Pages: <span id="max-pages-value">30</span>
      </label>
      <input type="range" id="max_pages" name="max_pages" min="1" max="100" value="30"
             class="w-full"
             oninput="document.getElementById('max-pages-value').textContent = this.value">
    </div>

    <button type="submit" id="crawl-btn"
            class="px-6 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500">
      Crawl Website
    </button>
  </form>

  <!-- Results Container -->
  <div id="results-container">
    <!-- Results will be loaded here -->
  </div>
</div>
